- id: monthly_smoke_detector_health_check
  alias: Monthly smoke detector health check
  description: Create a todo item if a smoke detector has not reported recently.
  mode: single
  trigger:
    - platform: time
      at: "09:00:00"
  condition:
    - condition: template
      value_template: "{{ now().weekday() == 5 and now().day <= 7 }}"
  action:
    - service: script.health_check_stale_entities
      data:
        todo_list: todo.home_maintenance
        notify_title: Home maintenance
        notify_targets:
          - notify.mobile_app_ankit_s_iphone
          - notify.mobile_app_pixel_7a
        stale_days: 30
        entities:
          - entity_id: binary_sensor.dining_room_smoke
            name: Dining Room Smoke Detector
