- id: bedroom_nightlight_left_exit
  alias: "Bedroom Nightlight - Left Exit"
  description: "Turn on Ankit's nightstand when he gets out of bed at night"
  mode: single
  trigger:
    - platform: state
      entity_id: binary_sensor.primary_bedroom_bed_sensor_bed_occupied_left
      from: "on"
      to: "off"
  condition:
    - condition: time
      after: "21:00:00"
      before: "07:00:00"
    - condition: state
      entity_id: light.primary_bedroom_lights
      state: "off"
  action:
    - service: light.turn_on
      target:
        entity_id: light.primary_bedroom_ankits_nightstand
      data:
        brightness_pct: 3
        color_temp_kelvin: 2200
    - wait_for_trigger:
        - platform: state
          entity_id: binary_sensor.primary_bedroom_bed_sensor_bed_occupied_left
          to: "on"
      timeout:
        minutes: 5
    - service: light.turn_off
      target:
        entity_id: light.primary_bedroom_ankits_nightstand
      data:
        transition: 5

- id: bedroom_nightlight_right_exit
  alias: "Bedroom Nightlight - Right Exit"
  description: "Turn on Danielle's nightstand when she gets out of bed at night"
  mode: single
  trigger:
    - platform: state
      entity_id: binary_sensor.primary_bedroom_bed_sensor_bed_occupied_right
      from: "on"
      to: "off"
  condition:
    - condition: time
      after: "21:00:00"
      before: "07:00:00"
    - condition: state
      entity_id: light.primary_bedroom_lights
      state: "off"
  action:
    - service: light.turn_on
      target:
        entity_id: light.primary_bedroom_danielles_nightstand
      data:
        brightness_pct: 3
        color_temp_kelvin: 2200
    - wait_for_trigger:
        - platform: state
          entity_id: binary_sensor.primary_bedroom_bed_sensor_bed_occupied_right
          to: "on"
      timeout:
        minutes: 5
    - service: light.turn_off
      target:
        entity_id: light.primary_bedroom_danielles_nightstand
      data:
        transition: 5
